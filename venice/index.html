<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>‚ö° ZEUS SPINS ‚Äî Prototype</title>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
  <style>
    body { margin:0; background:#111; color:#fff; font-family:sans-serif; text-align:center; }
    #game-container { margin:20px auto; display:block; }
    button { padding:10px 20px; font-size:18px; cursor:pointer; margin-top:10px; }
  </style>
</head>
<body>
  <h2>‚ö° ZEUS SPINS ‚Äî Prototype</h2>
  <p>Emoji slot ‚Ä¢ One payline (middle row) ‚Ä¢ Not for real-money use</p>
  <div id="game-container"></div>
  <p>Balance: <span id="balance">1000</span> | Bet: <span id="bet">10</span></p>
  <button id="spin">SPIN ‚ö°</button>

  <script>
    const symbols = ["üçí","üíé","‚ö°","üçã","‚≠ê","üîî"];
    let balance = 1000;
    const bet = 10;
    const rows = 3, cols = 3;
    let grid = [];

    const config = {
      type: Phaser.AUTO,
      width: 300,
      height: 300,
      backgroundColor: "#222",
      parent: "game-container",
      scene: { create }
    };

    let game = new Phaser.Game(config);

    function create() {
      const scene = this;
      const cellSize = 80;
      const offsetX = 40, offsetY = 40;

      for (let r = 0; r < rows; r++) {
        grid[r] = [];
        for (let c = 0; c < cols; c++) {
          const emoji = Phaser.Utils.Array.GetRandom(symbols);
          let text = scene.add.text(offsetX + c*cellSize, offsetY + r*cellSize, emoji, {
            font: "48px Arial", color: "#fff"
          }).setOrigin(0.5);
          grid[r][c] = text;
        }
      }

      document.getElementById("spin").onclick = () => spin(scene);
    }

    function spin(scene) {
      if (balance < bet) return;
      balance -= bet;
      document.getElementById("balance").textContent = balance;
      document.getElementById("spin").disabled = true;

      let results = [];
      for (let r = 0; r < rows; r++) {
        results[r] = [];
        for (let c = 0; c < cols; c++) {
          results[r][c] = Phaser.Utils.Array.GetRandom(symbols);
        }
      }

      // Animate columns stopping one by one
      for (let c = 0; c < cols; c++) {
        scene.time.delayedCall(c * 400, () => {
          for (let r = 0; r < rows; r++) {
            let cell = grid[r][c];
            let newSymbol = results[r][c];
            scene.tweens.add({
              targets: cell,
              y: cell.y + 40,
              alpha: 0,
              duration: 200,
              onComplete: () => {
                cell.setText(newSymbol);
                cell.y -= 40;
                cell.alpha = 1;
              }
            });
          }
          if (c === cols - 1) {
            scene.time.delayedCall(500, () => checkWin(scene, results));
          }
        });
      }
    }

    function checkWin(scene, results) {
      const mid = 1; // middle row
      if (results[mid][0] === results[mid][1] && results[mid][1] === results[mid][2]) {
        let win = bet * 5;
        balance += win;
        document.getElementById("balance").textContent = balance;
        celebrate(scene, results[mid][0]);
      }
      document.getElementById("spin").disabled = false;
    }

    function celebrate(scene, symbol) {
      let text = scene.add.text(150, 20, "BIG WIN! " + symbol, {
        font: "28px Arial", color: "#ff0"
      }).setOrigin(0.5);

      scene.tweens.add({
        targets: text,
        scale: { from: 1, to: 1.5 },
        yoyo: true,
        repeat: 5,
        duration: 200,
        onComplete: () => text.destroy()
      });

      // Emoji confetti üéâ
      for (let i = 0; i < 20; i++) {
        let emoji = scene.add.text(150, 150, "üéâ", { font: "20px Arial" }).setOrigin(0.5);
        scene.tweens.add({
          targets: emoji,
          x: Phaser.Math.Between(20, 280),
          y: Phaser.Math.Between(20, 280),
          alpha: 0,
          duration: 1000,
          onComplete: () => emoji.destroy()
        });
      }
    }
  </script>
</body>
</html>
