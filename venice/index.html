<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>‚ö° ZEUS SPINS ‚Äî Prototype</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      overflow: hidden;
    }
    h1 {
      margin: 10px 0;
    }
    #game {
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 10px;
      justify-content: center;
      margin-top: 20px;
    }
    .cell {
      width: 100px;
      height: 100px;
      font-size: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #222;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.6);
    }
    #controls {
      margin-top: 20px;
    }
    #celebration {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.6);
      font-size: 60px;
      font-weight: bold;
      z-index: 100;
      flex-direction: column;
      color: gold;
    }
    .confetti {
      position: absolute;
      font-size: 24px;
      animation: fall linear forwards;
    }
    @keyframes fall {
      to { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
    .flash {
      animation: flash 0.2s alternate 5;
    }
    @keyframes flash {
      from { background: rgba(255,255,255,0.8); }
      to { background: rgba(0,0,0,0); }
    }
    .shake {
      animation: shake 0.5s ease-in-out;
    }
    @keyframes shake {
      0%,100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    /* toast for soft loss message */
    #toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.1);
      color: #ccc;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 18px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease;
    }
    #toast.show {
      opacity: 1;
    }
  </style>
</head>
<body>
  <h1>‚ö° ZEUS SPINS ‚Äî Prototype</h1>
  <p>Emoji slot ‚Ä¢ One payline (middle row) ‚Ä¢ Not for real-money use</p>
  <div id="game"></div>
  <div id="controls">
    Balance: <span id="balance">1000</span> | 
    Bet: <span id="bet">10</span>
    <br><br>
    <button id="spin">SPIN ‚ö°</button>
  </div>
  <div id="celebration"></div>
  <div id="toast"></div>

  <script>
    const symbols = ["üçí","üçã","üçä","üçá","üçâ","üíé","‚ö°","üí∞"];
    const game = document.getElementById("game");
    const balanceEl = document.getElementById("balance");
    const celebration = document.getElementById("celebration");
    const spinBtn = document.getElementById("spin");
    const toast = document.getElementById("toast");

    let balance = 1000;
    const bet = 10;

    const values = {
      "üçí": "low",
      "üçã": "low",
      "üçä": "low",
      "üçá": "med",
      "üçâ": "med",
      "üíé": "med",
      "‚ö°": "high",
      "üí∞": "high"
    };

    // initialize grid
    let cells = [];
    for (let i=0;i<9;i++) {
      const div = document.createElement("div");
      div.className = "cell";
      div.textContent = symbols[Math.floor(Math.random()*symbols.length)];
      game.appendChild(div);
      cells.push(div);
    }

    function randomSymbol() {
      return symbols[Math.floor(Math.random()*symbols.length)];
    }

    // generate middle row with ~20% chance to win
    function randomMiddleRow() {
      if (Math.random() < 0.2) { // 20% chance of 3-of-a-kind
        const sym = symbols[Math.floor(Math.random()*symbols.length)];
        return [sym, sym, sym];
      } else {
        return [randomSymbol(), randomSymbol(), randomSymbol()];
      }
    }

    function spin() {
      if (balance < bet) return showToast("Not enough balance!");
      balance -= bet;
      balanceEl.textContent = balance;
      spinBtn.disabled = true;

      // spin animation for all cells
      cells.forEach((c,i)=>{
        c.textContent = symbols[Math.floor(Math.random()*symbols.length)];
      });

      setTimeout(()=>{
        // set middle row
        const midRow = randomMiddleRow();
        cells[3].textContent = midRow[0];
        cells[4].textContent = midRow[1];
        cells[5].textContent = midRow[2];

        // randomize other cells
        [0,1,2,6,7,8].forEach(i=>{
          cells[i].textContent = randomSymbol();
        });

        evaluateWin();
      },1000);
    }

    function evaluateWin() {
      const midRow = [cells[3], cells[4], cells[5]];
      const symbolsRow = midRow.map(c=>c.textContent);
      let winType = null;

      if (symbolsRow[0]===symbolsRow[1] && symbolsRow[1]===symbolsRow[2]) {
        const value = values[symbolsRow[0]];
        if (value==="low") winType="small";
        if (value==="med") winType="medium";
        if (value==="high") winType="big";
      }

      if (winType) {
        if (winType==="small") balance+=20;
        if (winType==="medium") balance+=100;
        if (winType==="big") balance+=500;
        balanceEl.textContent = balance;
        celebrate(winType);
      } else {
        // subtle shake on loss + soft toast
        midRow.forEach(c=>{
          c.classList.add("shake");
          setTimeout(()=>c.classList.remove("shake"),500);
        });
        showToast("üëâ Try again!");
      }

      spinBtn.disabled = false;
    }

    function celebrate(type) {
      celebration.innerHTML = "";
      celebration.style.display = "flex";
      if (type==="small") {
        celebration.textContent = "‚ú® Nice! ‚ú®";
        celebration.classList.add("flash");
        setTimeout(()=>celebration.style.display="none",1000);
      }
      else if (type==="medium") {
        celebration.textContent = "üéä WIN! üéä";
        reelShake();
        dropConfetti(20);
        setTimeout(()=>celebration.style.display="none",2000);
      }
      else if (type==="big") {
        celebration.textContent = "üí• BIG WIN!!! üí•";
        reelShake();
        dropConfetti(50);
        fireworks();
        setTimeout(()=>celebration.style.display="none",4000);
      }
    }

    function showToast(msg) {
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"),1500);
    }

    function reelShake() {
      cells.forEach(c=>{
        c.classList.add("shake");
        setTimeout(()=>c.classList.remove("shake"),500);
      });
    }

    function dropConfetti(count) {
      for (let i=0;i<count;i++) {
        const conf = document.createElement("div");
        conf.className="confetti";
        conf.textContent = ["üéâ","‚ú®","üí∞","‚≠ê","üéä"][Math.floor(Math.random()*5)];
        conf.style.left = Math.random()*window.innerWidth+"px";
        conf.style.top = "-20px";
        conf.style.animationDuration = (1+Math.random()*2)+"s";
        celebration.appendChild(conf);
        setTimeout(()=>conf.remove(),3000);
      }
    }

    function fireworks() {
      for (let i=0;i<10;i++) {
        const fire = document.createElement("div");
        fire.className="confetti";
        fire.textContent="üéÜ";
        fire.style.left = Math.random()*window.innerWidth+"px";
        fire.style.top = Math.random()*window.innerHeight/2+"px";
        fire.style.animationDuration = "2s";
        celebration.appendChild(fire);
        setTimeout(()=>fire.remove(),3000);
      }
    }

    spinBtn.addEventListener("click", spin);
  </script>
</body>
</html>
